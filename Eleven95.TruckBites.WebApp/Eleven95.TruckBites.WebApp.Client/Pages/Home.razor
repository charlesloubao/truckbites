@rendermode InteractiveWebAssembly
@attribute [StreamRendering]

@page "/"

@using Eleven95.TruckBites.Data.Models
@using Eleven95.TruckBites.Services.Interfaces
@using Eleven95.TruckBites.WebApp.Client.Components

@inject IFoodTruckService FoodTruckService

<PageTitle>Home</PageTitle>

<h2>Food Trucks</h2>

@if (FoodTrucks == null)
{
    <p>Loading...</p>
}
else
{
    <FoodTruckList FoodTrucks="@FoodTrucks"/>
}

@code {
    
    [PersistentState] public Order? Order { get; set; }
    private List<FoodTruck>? FoodTrucks { get; set; }

    protected override async Task OnInitializedAsync()
    {
        if (FoodTrucks == null)
        {
            FoodTrucks = await FoodTruckService.GetAllFoodTrucksAsync();
        }
    }
}